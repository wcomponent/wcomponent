Observer=function(e){function r(e){return void 0===e?!1:"get"in e||"set"in e}function n(e){return void 0===e?!1:"value"in e||"writable"in e}function t(e){return void 0===e?!1:!r(e)&&!n(e)}function i(e){return!("get"in e||"set"in e||"value"in e||"writable"in e||"enumerable"in e||"configurable"in e)}function o(e,r){return u(e.get,r.get)&&u(e.set,r.set)&&u(e.value,r.value)&&u(e.writable,r.writable)&&u(e.enumerable,r.enumerable)&&u(e.configurable,r.configurable)}function u(e,r){return e===r?0!==e||1/e===1/r:e!==e&&r!==r}function a(r){var n=e.create(w);return s.set(n,r),d.set(n,[]),n}function f(e,r){r.forEach(function(r){var n=p.get(r);void 0===n&&(n=[],p.set(r,n)),n.push(e)})}function v(e){var r=p.get(e)||[];p.set(e,[]);var n=[];if(r.forEach(function(e){n.push(e)}),0===n.length)return!1;try{e.call(void 0,n)}catch(t){console.log(t)}return!0}function c(e,r,t,i){var o={type:e,object:r,name:t};return n(i)&&(o.oldValue=i.value),o}function l(e){var r=b.get(e);if(void 0===r)throw"can only get notifier of observable objects, given "+e;return void 0===r.notifier&&(r.notifier=a(e)),r.notifier}var b=new WeakMap,g=[],s=new WeakMap,d=new WeakMap,p=new WeakMap,w=e.create(e.prototype);return e.defineProperty(w,"notify",{value:function(r){var n=this;if(e(this)!==this)throw new TypeError("this must be an Object, given "+this);var t=s.get(n);if(void 0===t)return void 0;var i=d.get(n);if(void 0===i)return void 0;var o=r.type;if("string"!=typeof o)throw new TypeError("change record type must be a string, given "+o);var u=e.create(e.prototype);for(var a in r)"object"!=a&&(u[a]=r[a]);return u.object=t,e.preventExtensions(u),void f(u,i)},writable:!0,enumerable:!1,configurable:!1}),_DeliverAllChangeRecords=function(){var e=g,r=!1;return e.forEach(function(e){r=v(e)||r}),r},e.createObservable=function(a){if(e(a)!==a)throw new TypeError("target must be an Object, given "+a);var v,g=new Reflect.Handler;return g.notifier=void 0,g.defineProperty=function(a,b,g){var s=e.getOwnPropertyDescriptor(a,b),p=e.isExtensible(a),w=l(v),h=d.get(w),y="reconfigured";if(void 0===s&&p===!1)return!1;if(void 0===s&&p===!0){e.defineProperty(a,b,g);var m=c("new",a,b,void 0);return f(m,h),!0}if(i(g))return!0;if(o(s,g))return!0;if(s.configurable===!1){if(g.configurable===!0)return!1;if("enumerable"in g&&g.enumerable!==s.enumerable)return!1}if(t(g));else if(n(s)!==n(g)){if(s.configurable===!1)return!1}else if(n(s)&&n(g)){if(s.configurable===!1){if(s.writable===!1&&g.writable===!0)return!1;if(s.writable===!1&&"value"in g&&!u(g.value,s.value))return!1}"writable"in g&&(!u(g.writable,s.writable)||"enumerable"in g)&&(!u(g.enumerable,s.enumerable)||"configurable"in g)&&!u(g.configurable,s.configurable)||(y="updated")}else if(r(s)&&r(g)&&s.configurable===!1){if("set"in g&&!u(g.set,s.set))return!1;if("get"in g&&!u(g.get,s.get))return!1}e.defineProperty(a,b,g);var m=c(y,a,b,s);return f(m,h),!0},g.deleteProperty=function(r,n){var t=e.getOwnPropertyDescriptor(r,n);if(void 0===t)return!0;var i=l(v),o=d.get(i);if(t.configurable===!0){delete r[n];var u=c("deleted",r,n,t);return f(u,o),!0}return!1},v=Proxy(a,g),b.set(v,g),v},e.observe=function(r,n){if(e(r)!==r)throw new TypeError("target must be an Object, given "+r);if("function"!=typeof n)throw"observer must be a function, given "+n;if(e.isFrozen(n))throw"observer can't be frozen";var t=l(r),i=d.get(t);if(-1!==i.indexOf(n))return void 0;i.push(n);var o=g;return-1!==o.indexOf(n)?void 0:void o.push(n)},e.unobserve=function(r,n){if(e(r)!==r)throw new TypeError("target must be an Object, given "+r);var t=l(r),i=d.get(t),o=i.indexOf(n);return-1===o?void 0:void i.splice(o,1)},e.deliverChangeRecords=function(e){if("function"!=typeof e)throw"callback must be a function, given "+e;return void v(e)},e.getNotifier=function(r){if(e(r)!==r)throw new TypeError("target must be an Object, given "+r);return e.isFrozen(r)?null:l(r)},_DeliverAllChangeRecords};